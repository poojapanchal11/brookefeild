<html>
<body>
<font face='arial'>
<!---------------------------------------------------->

<h2>anyDB</h2>

Class class for easy and unified database access.
<p>
<!---------------------------------------------------->
<hr>

<h3>Contenct</h3>
<ol>
<li><a href="#scope">Scope</a><br>
<li><a href="#features">Features</a><br>
<li><a href="#usage">Usage/Examples</a><br>
    <ul>
    <li><a href="#ex1">Connecting and Disconnecting</a><br>
    <li><a href="#ex2">Get the next result</a><br>
    <li><a href="#ex3">Get the next result and displaying it in a table</a><br>
    <li><a href="#ex4">Get the next results in a numeric array</a><br>
    <li><a href="#ex5">Get the next results in an array with numeric and associative entries</a><br>
    <li><a href="#ex6">Get all results</a><br>
    <li><a href="#ex7">Get all results with execute()</a><br>
    <li><a href="#ex8">Dump all results</a><br>
    <li><a href="#ex9">Get one result column</a><br>
    <li><a href="#ex10">Dump one result column</a><br>
    <li><a href="#ex11">Dump one result column in a Select Box</a><br>
    <li><a href="#ex12">Get one result value</a><br>
    <li><a href="#ex13">Insert into database</a><br>
    <li><a href="#ex14">Display database content on pages</a><br>
    <li><a href="#ex16">Get table names</a><br>
    <li><a href="#ex17">Export table data to csv</a><br>
    <li><a href="#ex18">Export database data to sql</a><br>

    <li><a href="#ex15">How to use QueryHelper</a><br>
    </ul>
<li><a href="#notes">Notes</a><br>
<li><a href="#history">History/Changes</a><br>
</ol>
<!---------------------------------------------------->
<hr>

<a name="scope">
<h3>1. Scope</h3>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

If you believe that database abstraction is a good think, but you don't want
to join the religous fights about the best one out there, then we have
a common interest. 
<p>
This abstract wrapper class provides easy and simple class methods to access
the most important db function.<br> 
Classes implementing the functionality for native PHP functions, PEAR, 
PHPLIB, ADOdb and METABASE enables you to switch between these db abstraction 
layers by changing only a single line of code.
<p>
Now you are able to use a unifed abstraction layer for database access and 
switch between the underlaying layers.

<!---------------------------------------------------->
<hr>
<a name="features">
<h3>2. Features</h3>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<ul>
    <li>With anyDB you can access more than 15 different databases including <b>MySQL, PostgreSQL, Mini SQL</b> and others.<br>
        Also flat-file databas systems are supported (<b>DBX</b> and <b>SQLite</b>) which don't need a pre 
        installed database system.
        <p>
    <li>Very slim interface, no overhead only essential functions supported. Functions as a wrapper for 
        <b>ADODB, Metabase, PEAR</b> and <b>PHPLIB</b> as well as PHPs <b>MySQL, PostgreSQL, DBX</b> and <b>SQLite</b> 
        functions.
        <p>
    <li>Portable code, not only between databases but also between the other bulky database systems.
        <p>
    <li>Less php code than the native php functions and the other database layers. 
        <p>
    <li>Powerful addon widgets, like paging result sets or exporting database data.
        <p>
    <li>Functions to return single values, associative or numeric arrays or both.
        <p>
    <li>Javadoc-style documentation for the API.
        <p>
    <li>Databases matrix for the different wrappers:<p>
        <table border=1>
            <tr>
                <td></td>
                <th>ADODB</th>
                <th>Metabase</th>
                <th>PEAR</th>
                <th>PHPLIB</th>
                <th>additional anyDB wrapper</th>
            </tr><tr>
                <th>DBX</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>x</td>
            </tr><tr>
                <th>Frontbase</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>Informix</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>Interbase</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>Microsoft SQL</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>Mini SQL</th>
                <td>&nbsp;</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>MySQL</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
            </tr><tr>
                <th>Oracle 7</th>
                <td>x</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>x</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>Oracle 8</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>ODBC</th>
                <td>&nbsp;</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>PostgreSQL</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
            </tr><tr>
                <th>Sybase</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
            </tr><tr>
                <th>SQLite</th>
                <td>x</td>
                <td>x</td>
                <td>x</td>
                <td>&nbsp;</td>
                <td>x</td>
            </tr>
        </table>
        <p>
        With anyDB you can access all of them.
        <p>
        
    <li>PHP related links: <a href="http://php.weblogs.com/adodb">ADODB</a>, 
        <a href="http://www.phpclasses.org/metabase">Metabase</a>, 
        <a href="http://pear.php.net/package/DB">PEAR</a>, 
        <a href="http://sourceforge.net/projects/phplib">PHPLIB</a>, 
        <a href="http://dbx.idya.net/">DBX</a> and 
        <a href="http://www.php.net/sqlite">SQLite</a>.
        <p>
<li>Download:<br>
<table border="1" cellpadding="15" cellspacing="" bordercolor="#000000">
<tr><td>
The <a href="http://www.phpclasses.org/anydb">latest version </a> can always be found @ <a href="http://www.phpclasses.org/">www.phpclasses.org</a>. 
<br><br><a href="http://lennartg.users.phpclasses.org/rate.html?package=846">Rate</a> this class here...
</td></tr>
</table>
<p>
<!------ Start of HTML Code ------->

<table border="1" cellpadding="1" cellspacing="0" bordercolor="#000000">
<form action="http://www.hotscripts.com/cgi-bin/rate.cgi" method="POST">
<tr>
<td>
<table width="100%" border="0" cellspacing="0"  cellpadding="10">
<tr>
<td>Rate this script @ <a href="http://www.hotscripts.com">www.hoscripts.com</a>
<input type="hidden" name="ID" value="18702">
<input type="hidden" name="external" value="1"></td>
<td><select name="rate" size="1">
<option value="5" selected>Excellent!</option>
<option value="4">Very Good</option>
<option value="3">Good</option>
<option value="2">Fair</option>
<option value="1">Poor</option>
</select>
<input name="submit" type="submit" value="Vote"> </td>

</tr>
</table></td>
</tr></form>
</table>
<!------ End of HTML Code ------->
</ul>


<!---------------------------------------------------->
<hr>

<a name="usage">
<h3>3. Usage</h3>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

All the following examples can be found in the <font face='courier'>examples</font> folder.

<a name="ex1">
<h4>Connecting and Disconnecting</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#006600">require_once&nbsp;</font><font color="#CC0000">'../anyDB.php'</font><font color="#006600">;
<br />require_once&nbsp;</font><font color="#CC0000">'../addon/DBHelper.php'</font><font color="#006600">;
<br />require_once&nbsp;</font><font color="#CC0000">'../addon/QueryHelper.php'</font><font color="#006600">;
<br />
<br /></font><font color="#0000CC">$database&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#CC0000">'lens'</font><font color="#006600">;
<br /></font><font color="#0000CC">$host&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#CC0000">'localhost'</font><font color="#006600">;
<br /></font><font color="#0000CC">$user&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#CC0000">''</font><font color="#006600">;
<br /></font><font color="#0000CC">$password&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#CC0000">''</font><font color="#006600">;
<br /></font><font color="#0000CC">$dbType&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#CC0000">'mysql'</font><font color="#006600">;
<br /></font><font color="#0000CC">$persistent&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">false</font><font color="#006600">;
<br />
<br /></font><font color="#FF9900">// create a new db layer
<br /></font><font color="#0000CC">$db&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">anyDB</font><font color="#006600">::</font><font color="#0000CC">getLayer</font><font color="#006600">(</font><font color="#CC0000">'MYSQL'</font><font color="#006600">,</font><font color="#CC0000">''</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$dbType</font><font color="#006600">);
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF9900">//$db = anyDB::getLayer('PEAR', 'c:/php4/pear/', $dbType);
<br />&nbsp;&nbsp;&nbsp;&nbsp;//$db = anyDB::getLayer('PHPLIB', '../../../inc/phplib-7.2d/', $dbType);
<br />&nbsp;&nbsp;&nbsp;&nbsp;//$db = anyDB::getLayer('METABASE', '../../../inc/metabase/', $dbType);
<br />&nbsp;&nbsp;&nbsp;&nbsp;//$db = anyDB::getLayer('ADODB', '../../../inc/adodb/', $dbType);
<br />
<br />//connect to db
<br /></font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">connect</font><font color="#006600">(</font><font color="#0000CC">$host</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$database</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$user</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$password</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$persistent</font><font color="#006600">);
<br />
<br /></font><font color="#FF9900">// do something here
<br />
<br /></font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">free</font><font color="#006600">();
<br /></font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">disconnect</font><font color="#006600">();
<br />
<br />echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>
In line 13 the 'mysql' database layer is selected. If you uncomment on of the lines 13 to 17 another layer is chosen.<br>
In line 22 you can start accessing the database. Just insert one of the following examples.

<!---------------------------------------------------->
<hr>
<a name="ex2">
<h4>Get the next result</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get the next result set
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users where id=2"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getNext</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">implode</font><font color="#006600">(</font><font color="#CC0000">' - '</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$res</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
uschi - uschi@uschi.de<br>

<!---------------------------------------------------->
<hr>
<a name="ex3">
<h4>Get the next result and displaying it in a table</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get the next result and put it in a html table
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users where id=2"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getNext</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpNext</font><font color="#006600">(</font><font color="#0000CC">$res</font><font color="#006600">,&nbsp;</font><font color="#0000CC">true</font><font color="#006600">);
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
<table border=1>
<tr>
	<th>name</th><td>uschi</td>
</tr>
<tr>
	<th>email</th><td>uschi@uschi.de</td>
</tr>
</table>

<!---------------------------------------------------->
<hr>
<a name="ex4">
<h4>Get the next results in a numeric array</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get the next result set as a numeric array
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users where id=2"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getNext</font><font color="#006600">(</font><font color="#0000CC">ANYDB_RES_NUM</font><font color="#006600">);
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpNext</font><font color="#006600">(</font><font color="#0000CC">$res</font><font color="#006600">,&nbsp;</font><font color="#0000CC">true</font><font color="#006600">);
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
<table border=1>
<tr>
	<th>0</th><td>uschi</td>
</tr>
<tr>
	<th>1</th><td>uschi@uschi.de</td>
</tr>
</table>

<!---------------------------------------------------->
<hr>
<a name="ex5">
<h4>Get the next result in an array with numeric and associative entries</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get the next result set as an array with numeric and associative entries
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users where id=2"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getNext</font><font color="#006600">(</font><font color="#0000CC">ANYDB_RES_BOTH</font><font color="#006600">);
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpNext</font><font color="#006600">(</font><font color="#0000CC">$res</font><font color="#006600">,&nbsp;</font><font color="#0000CC">true</font><font color="#006600">);
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
<table border=1>
<tr>
	<th>0</th><td>uschi</td>
</tr>
<tr>
	<th>name</th><td>uschi</td>
</tr>
<tr>
	<th>1</th><td>uschi@uschi.de</td>
</tr>
<tr>
	<th>email</th><td>uschi@uschi.de</td>
</tr>
</table>

<!---------------------------------------------------->
<hr>
<a name="ex6">
<h4>Get all results</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get all results
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$results&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getAll</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</font><font color="#0000CC">$results&nbsp;</font><font color="#006600">as&nbsp;</font><font color="#0000CC">$res</font><font color="#006600">)&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">implode</font><font color="#006600">(</font><font color="#CC0000">' - '</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$res</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />&nbsp;&nbsp;&nbsp;&nbsp;}
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
peter - peter@peter.de<br>uschi - uschi@uschi.de<br>

<!---------------------------------------------------->
<hr>
<a name="ex7">
<h4>Get all results with execute()</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get all the results with execute
<br /></font><font color="#0000CC">$results&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">execute</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users"</font><font color="#006600">);
<br />foreach&nbsp;(@</font><font color="#0000CC">$results&nbsp;</font><font color="#006600">as&nbsp;</font><font color="#0000CC">$res</font><font color="#006600">)&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">implode</font><font color="#006600">(</font><font color="#CC0000">' - '</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$res</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
peter - peter@peter.de<br>uschi - uschi@uschi.de<br>

<!---------------------------------------------------->
<hr>
<a name="ex8">
<h4>Dump all results</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get all the results and print them in a html table
<br /></font><font color="#0000CC">$results&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">execute</font><font color="#006600">(</font><font color="#CC0000">"SELECT name, email FROM users"</font><font color="#006600">);
<br />echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpAll</font><font color="#006600">(</font><font color="#0000CC">$results</font><font color="#006600">,&nbsp;</font><font color="#0000CC">true</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'Name'</font><font color="#006600">,</font><font color="#CC0000">'Email Adress'</font><font color="#006600">));
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
<table border=1>
<tr><th>Name</th><th>Email Adress</th></tr>
<tr>
<td>peter</td><td>peter@peter.de</td></tr>
<tr>
<td>uschi</td><td>uschi@uschi.de</td></tr>
</table>

<!---------------------------------------------------->
<hr>
<a name="ex9">
<h4>Get one result column</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get one column
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name FROM users"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$results&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getColumn</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</font><font color="#0000CC">$results&nbsp;</font><font color="#006600">as&nbsp;</font><font color="#0000CC">$res</font><font color="#006600">)&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />&nbsp;&nbsp;&nbsp;&nbsp;}
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
peter<br>
uschi<br>

<!---------------------------------------------------->
<hr>
<a name="ex10">
<h4>Dump one result column</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get all one column and print them in a table
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name FROM users"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getColumn</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpColumn</font><font color="#006600">(</font><font color="#0000CC">$res</font><font color="#006600">,&nbsp;</font><font color="#0000CC">true</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'name'</font><font color="#006600">);
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpColumn</font><font color="#006600">(</font><font color="#0000CC">$res</font><font color="#006600">,&nbsp;</font><font color="#0000CC">false</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'name'</font><font color="#006600">);
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
<table border=1>
<tr>
<th>name</th>
<td>peter</td><td>uschi</td></tr>
</table>
<br><table border=1>
<tr>
<th>name</th>
</tr>
<tr><td>peter</td></tr>
<tr><td>uschi</td></tr>

</table>

<!---------------------------------------------------->
<hr>
<a name="ex11">
<h4>Dump one result column in a Selectbox</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC"><br /></font><font color="#FF9900">// display a column in a select box
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT name FROM users"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$res&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getColumn</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">selectBox</font><font color="#006600">(</font><font color="#0000CC">$res</font><font color="#006600">,&nbsp;</font><font color="#0000CC">0</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'mybox'</font><font color="#006600">);
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
<select name="mybox" size="1">
<option>peter</option>
<option>uschi</option>
</select>

<!---------------------------------------------------->
<hr>
<a name="ex12">
<h4>Get one result value</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// get a single value from the database
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"SELECT count(*) FROM users"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">$count&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">getValue</font><font color="#006600">();
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$count</font><font color="#006600">;
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
2

<!---------------------------------------------------->
<hr>
<a name="ex13">
<h4>Insert into database</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// insert data in the database
<br /></font><font color="#006600">if&nbsp;(</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">query</font><font color="#006600">(</font><font color="#CC0000">"INSERT INTO users (name, email) VALUES ('lennart','lennart@lennart.de')"</font><font color="#006600">))&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#CC0000">'ok'</font><font color="#006600">;
<br />}&nbsp;else&nbsp;{
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#0000CC">$db</font><font color="#006600">-&gt;</font><font color="#0000CC">error</font><font color="#006600">;
<br />}
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
ok


<!---------------------------------------------------->
<hr>
<a name="ex14">
<h4>Display database content on pages</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#FF9900">// create a new page widget
<br /></font><font color="#006600">require_once&nbsp;</font><font color="#CC0000">'../addon/PageWidget.php'</font><font color="#006600">;
<br /></font><font color="#FF9900">// widget settings
<br /></font><font color="#0000CC">$entries&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#0000CC">2</font><font color="#006600">;
<br /></font><font color="#0000CC">$table&nbsp;</font><font color="#006600">=&nbsp;</font><font color="#CC0000">'users'</font><font color="#006600">;
<br /></font><font color="#FF9900">// which rows to display
<br /></font><font color="#0000CC">$rows&nbsp;</font><font color="#006600">=&nbsp;array(</font><font color="#CC0000">'name'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'email'</font><font color="#006600">);
<br /></font><font color="#0000CC">$widget&nbsp;</font><font color="#006600">=&nbsp;new&nbsp;</font><font color="#0000CC">PageWidget</font><font color="#006600">(</font><font color="#0000CC">$db</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'mysqlLimitQuery'</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$table</font><font color="#006600">,&nbsp;</font><font color="#0000CC">$entries</font><font color="#006600">);
<br />
<br />echo&nbsp;</font><font color="#CC0000">"&lt;h2&gt;Page&nbsp;$widget</font><font color="#006600">-&gt;</font><font color="#CC0000">page&lt;/h2&gt;"</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">$widget</font><font color="#006600">-&gt;</font><font color="#0000CC">getPageDropdown</font><font color="#006600">();
<br />echo&nbsp;</font><font color="#CC0000">"Entries&nbsp;$widget</font><font color="#006600">-&gt;</font><font color="#CC0000">start&nbsp;-&nbsp;&nbsp;$widget</font><font color="#006600">-&gt;</font><font color="#CC0000">end&nbsp;of&nbsp;$widget</font><font color="#006600">-&gt;</font><font color="#CC0000">total&lt;p&gt;"</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#CC0000">'['&nbsp;</font><font color="#006600">.&nbsp;</font><font color="#0000CC">$widget</font><font color="#006600">-&gt;</font><font color="#0000CC">getIndex</font><font color="#006600">(</font><font color="#CC0000">'] ['</font><font color="#006600">)&nbsp;.</font><font color="#CC0000">']&lt;p&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">$widget</font><font color="#006600">-&gt;</font><font color="#0000CC">getOrderDropdown</font><font color="#006600">(</font><font color="#0000CC">$rows</font><font color="#006600">);
<br />echo&nbsp;</font><font color="#0000CC">$widget</font><font color="#006600">-&gt;</font><font color="#0000CC">getNextLink</font><font color="#006600">();
<br />echo&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">$widget</font><font color="#006600">-&gt;</font><font color="#0000CC">getPrevLink</font><font color="#006600">();
<br /></font><font color="#FF9900">// get the data
<br /></font><font color="#006600">echo&nbsp;</font><font color="#0000CC">DBHelper</font><font color="#006600">::</font><font color="#0000CC">dumpAll</font><font color="#006600">(</font><font color="#0000CC">$widget</font><font color="#006600">-&gt;</font><font color="#0000CC">get</font><font color="#006600">(</font><font color="#0000CC">$rows</font><font color="#006600">),&nbsp;</font><font color="#0000CC">true</font><font color="#006600">);
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
Example output (with more entries)<br>
<br>
<img src="screenshot.jpg" border=0 alt="example output">


<!---------------------------------------------------->
<hr>
<a name="ex16">
<h4>Get table names</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#0000BB">
<br /></font><font color="#FF8000">// get all tables
<br /></font><font color="#0000BB">$tables </font><font color="#007700">= </font><font color="#0000BB">$db</font><font color="#007700">-&gt;</font><font color="#0000BB">getTables</font><font color="#007700">();
<br />foreach (</font><font color="#0000BB">$tables </font><font color="#007700">as </font><font color="#0000BB">$table</font><font color="#007700">) {
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000BB">$table </font><font color="#007700">. </font><font color="#DD0000">'&lt;br&gt;'</font><font color="#007700">;
<br />}
</font>
</code>
<p>

<b>Output:</b><br>
users

<!---------------------------------------------------->
<hr>
<a name="ex17">
<h4>Export table data to csv</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000BB">
<br /></font><font color="#FF8000">// export table content as csv data
<br /></font><font color="#0000BB">$csv </font><font color="#007700">= </font><font color="#0000BB">Exporter</font><font color="#007700">::</font><font color="#0000BB">getTable</font><font color="#007700">(</font><font color="#0000BB">$db</font><font color="#007700">, </font><font color="#DD0000">'users'</font><font color="#007700">, </font><font color="#0000BB">ANYDB_DUMP_CSV</font><font color="#007700">);
<br />echo </font><font color="#0000BB">nl2br</font><font color="#007700">(</font><font color="#0000BB">$csv</font><font color="#007700">);
</font>
</code>
<p>

<b>Output:</b><br>
id	name	login	email<br />
1	peter	peter	peter@peter.de<br />
2	uschi	uschi	uschi@uschi.de<br />
<!---------------------------------------------------->
<hr>
<a name="ex18">
<h4>Export database data to sql</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000BB">
<br /></font><font color="#FF8000">// export table content as sql statements
<br /></font><font color="#0000BB">$sqlData </font><font color="#007700">= </font><font color="#0000BB">Exporter</font><font color="#007700">::</font><font color="#0000BB">getDB</font><font color="#007700">(</font><font color="#0000BB">$db</font><font color="#007700">, </font><font color="#0000BB">ANYDB_DUMP_SQL</font><font color="#007700">);
<br />
<br />foreach(</font><font color="#0000BB">$sqlData </font><font color="#007700">as </font><font color="#0000BB">$key </font><font color="#007700">=&gt; </font><font color="#0000BB">$data</font><font color="#007700">) {
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"$key&lt;br&gt;"</font><font color="#007700">;
<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000BB">nl2br</font><font color="#007700">(</font><font color="#0000BB">$data</font><font color="#007700">);
<br />}
</font>
</code>
<p>

<b>Output:</b><br>
users<br>INSERT  INTO users (id, name, login, email) VALUES ('1', 'peter', 'peter', 'peter@peter.de') ;<br />
INSERT  INTO users (id, name, login, email) VALUES ('2', 'uschi', 'uschi', 'uschi@uschi.de') ;<br />

<!---------------------------------------------------->
<hr>
<a name="ex15">
<h4>How to use QueryHelper</h4>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<code><font color="#000000">
<font color="#0000CC">
<br /></font><font color="#006600">require_once&nbsp;</font><font color="#CC0000">'../addon/QueryHelper.php'</font><font color="#006600">;
<br /></font><font color="#006600">echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">insert</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'a'</font><font color="#006600">,</font><font color="#0000CC">4</font><font color="#006600">,</font><font color="#0000CC">2</font><font color="#006600">))&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">insert</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'id'&nbsp;</font><font color="#006600">=&gt;&nbsp;</font><font color="#CC0000">2</font><font color="#006600">,</font><font color="#CC0000">'name'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">'peter'</font><font color="#006600">))&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">insert</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'id'&nbsp;</font><font color="#006600">=&gt;&nbsp;</font><font color="#CC0000">2</font><font color="#006600">,</font><font color="#CC0000">'name'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">&quot;'peter'&quot;</font><font color="#006600">),&nbsp;</font><font color="#0000CC">false</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">delete</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'id'</font><font color="#006600">=&gt;</font><font color="#0000CC">2</font><font color="#006600">,</font><font color="#CC0000">'name'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">'peter'</font><font color="#006600">))&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">replace</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'id'&nbsp;</font><font color="#006600">=&gt;&nbsp;</font><font color="#0000CC">2</font><font color="#006600">,</font><font color="#CC0000">'name'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">'peter'</font><font color="#006600">))&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">select</font><font color="#006600">(array(</font><font color="#CC0000">'name'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'test'</font><font color="#006600">),&nbsp;</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'id'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">5</font><font color="#006600">,</font><font color="#CC0000">'test'</font><font color="#006600">=&gt;</font><font color="#CC0000">'2'</font><font color="#006600">),&nbsp;</font><font color="#0000CC">true</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'LIMIT 10'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'DISTINCT'</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">select</font><font color="#006600">(array(</font><font color="#CC0000">'name'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'test'</font><font color="#006600">),&nbsp;</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'id=3'</font><font color="#006600">,&nbsp;</font><font color="#0000CC">false</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'LIMIT 10'</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">update</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'name'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'id'</font><font color="#006600">=&gt;</font><font color="#0000CC">4</font><font color="#006600">),&nbsp;</font><font color="#CC0000">'id=10'</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br />echo&nbsp;</font><font color="#0000CC">QueryHelper</font><font color="#006600">::</font><font color="#0000CC">update</font><font color="#006600">(</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;array(</font><font color="#CC0000">'name'&nbsp;</font><font color="#006600">=&gt;</font><font color="#CC0000">'peter'</font><font color="#006600">,&nbsp;</font><font color="#CC0000">'id'</font><font color="#006600">=&gt;</font><font color="#0000CC">2</font><font color="#006600">),&nbsp;</font><font color="#CC0000">'id=10'</font><font color="#006600">,&nbsp;</font><font color="#0000CC">false</font><font color="#006600">)&nbsp;.&nbsp;</font><font color="#CC0000">'&lt;br&gt;'</font><font color="#006600">;
<br /></font><font color="#0000CC"></font>
</font>
</code>
<p>

<b>Output:</b><br>
INSERT INTO peter VALUES ('a', 4, 2) <br>
INSERT INTO peter (id, name) VALUES (2, 'peter') <br>
INSERT INTO peter (id, name) VALUES (2, 'peter') <br>
DELETE FROM peter WHERE id=2, name='peter' <br>
REPLACE INTO peter (id, name) VALUES (2, 'peter') <br>
SELECT DISTINCT name, test FROM peter WHERE id=5, test='2' LIMIT 10<br>
SELECT name, test FROM peter WHERE id=3 LIMIT 10<br>
UPDATE peter SET name='peter', id=4 WHERE id=10 <br>
UPDATE peter SET name=peter, id=2 WHERE id=10 <br>
<!---------------------------------------------------->
<hr>

<a name="notes">
<h3>4. Notes</h3>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

<ul>
	<li>The default result type is an associative array
	<li>Metabase converts the keys in an associative array to lower keys
	<li>Metabase returns the numeric entries first for 'ANYDB_RES_BOTH' 
	<li>PEAR returns the alphanumeric entries first for 'ANYDB_RES_BOTH' 
	<li>Native mysql, PHPLIB, ADOdb return the numeric, alphanumeric pairs for 'ANYDB_RES_BOTH' 
</ul>

<!---------------------------------------------------->
<hr>

<a name="history">
<h3>5. History/Changes</h3>
</a>
<div align=right><font size=-2><a href="#top">to top</a></font></div>

See <a href="../changes.txt">changes.txt</a> in the root directory
<!---------------------------------------------------->

</body>
</html>